# –°–∏—Å—Ç–µ–º–∞ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ —Ä–µ—á–∏ (Speaker Diarization)

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ —Ä–µ—á–∏ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PyAnnote –∏ Whisper. –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã –∏–∑ S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ø–∏–∫–µ—Ä–æ–≤, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç —Ä–µ—á—å –∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –∏–∑ DION API.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–î–∏–∞—Ä–∏–∑–∞—Ü–∏—è —Ä–µ—á–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏–∫–µ—Ä–æ–≤ –≤ –∞—É–¥–∏–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PyAnnote 3.1
- **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è**: –í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ä–µ—á–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Å –ø–æ–º–æ—â—å—é Whisper large-v2
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DION API**: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –ø–æ –∏—Ö ID
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑ S3**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ MinIO/S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU/CPU —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ email

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- FFmpeg (–¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∞—É–¥–∏–æ)
- CUDA 12.1+ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è)
- MinIO –∏–ª–∏ AWS S3 –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- Hugging Face —Ç–æ–∫–µ–Ω (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π PyAnnote)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd diarization
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**Windows:**
```bash
# –ß–µ—Ä–µ–∑ Chocolatey
choco install ffmpeg

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å https://ffmpeg.org/
```

**Linux:**
```bash
sudo apt-get update
sudo apt-get install -y ffmpeg git build-essential cmake
```

**macOS:**
```bash
brew install ffmpeg
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –î–ª—è GPU (CUDA 12.1):
```bash
# –°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PyTorch —Å CUDA
pip install torch==2.2.0+cu121 torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# –ó–∞—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

#### –î–ª—è CPU:
```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# Hugging Face —Ç–æ–∫–µ–Ω (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è PyAnnote)
export HF_TOKEN="your_huggingface_token"

# DION API —Ç–æ–∫–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
export DION_ACCESS_TOKEN="your_dion_token"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ S3/MinIO
export AWS_ACCESS_KEY_ID="minioadmin"
export AWS_SECRET_ACCESS_KEY="minioadmin"
export S3_ENDPOINT="http://127.0.0.1:9000"
export S3_BUCKET="diarization-files"
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `backend/app.py`:

```python
# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
EMAIL_HOST = "smtp.mailmug.net"
EMAIL_PORT = 2525
EMAIL_USER = "your_email_user"
EMAIL_PASS = "your_email_password"
EMAIL_TO = "recipient@example.com"

# –ú–æ–¥–µ–ª–∏
PYANNOTE_MODEL = "pyannote/speaker-diarization-3.1"
WHISPER_MODEL = "large-v2"  # –∏–ª–∏ "large-v3" –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
```

## üê≥ –ó–∞–ø—É—Å–∫ —Å Docker

### –ó–∞–ø—É—Å–∫ MinIO (S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)

```bash
docker-compose up -d minio
```

MinIO –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:
- API: http://localhost:9000
- –ö–æ–Ω—Å–æ–ª—å: http://localhost:9001
- –õ–æ–≥–∏–Ω: `minioadmin` / –ü–∞—Ä–æ–ª—å: `minioadmin`

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é `api` –≤ `docker-compose.yml` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
docker-compose up -d api
```

–ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:

```bash
docker build -t diarization-api .
docker run -p 8000:8000 \
  -e DION_ACCESS_TOKEN="your_token" \
  -e HF_TOKEN="your_hf_token" \
  -v $(pwd)/backend/models:/app/models \
  diarization-api
```

## üöÄ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

### 1. –ó–∞–ø—É—Å–∫ MinIO

```bash
docker-compose up -d minio
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
cd backend
python app.py
```

–ò–ª–∏ —á–µ—Ä–µ–∑ uvicorn:

```bash
cd backend
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
diarization/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app.py              # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ dion_client.py      # –ö–ª–∏–µ–Ω—Ç –¥–ª—è DION API
‚îÇ   ‚îú‚îÄ‚îÄ models/             # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–æ–¥–µ–ª–µ–π ML
‚îÇ   ‚îî‚îÄ‚îÄ tmp/                # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ minio/
‚îÇ   ‚îî‚îÄ‚îÄ data/               # –î–∞–Ω–Ω—ã–µ MinIO
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile              # Docker –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt        # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ S3

–°–∏—Å—Ç–µ–º–∞ –æ–∂–∏–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤ –≤ S3:

```
diarization-files/
‚îî‚îÄ‚îÄ {UUID}/
    ‚îî‚îÄ‚îÄ {timestamp}/
        ‚îú‚îÄ‚îÄ source.mp4      # –ê—É–¥–∏–æ/–≤–∏–¥–µ–æ —Ñ–∞–π–ª
        ‚îî‚îÄ‚îÄ speech.json     # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: JSON —Å —Ç—Ä–µ–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### –§–æ—Ä–º–∞—Ç JSON —Å —Ç—Ä–µ–∫–∞–º–∏

–§–∞–π–ª `speech.json` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ JSON (–ø–æ –æ–¥–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É –Ω–∞ —Å—Ç—Ä–æ–∫—É):

```json
{"start_ms": 0, "end_ms": 5000, "user_id": "user-uuid-1"}
{"start_ms": 5000, "end_ms": 10000, "user_id": "user-uuid-2"}
```

### –§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ email –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:

```json
{
  "status": "success",
  "segments": [
    {
      "start": 0.0,
      "end": 5.2,
      "speaker": "SPEAKER_00",
      "text": "–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç",
      "user_id": "user-uuid-1",
      "user_info": {
        "email": "user@example.com",
        "name": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
      }
    }
  ],
  "total_duration": 120.5,
  "directory": "uuid/timestamp/",
  "processing_time": 45.3
}
```

## üîß API Endpoints

### GET `/`
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "optimized": true,
  "version": "2.0"
}
```

### GET `/health`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞ –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "device": "cuda",
  "models_loaded": true,
  "parallel_workers": 2,
  "transcription_mode": "fast",
  "whisper_model": "large-v2",
  "pyannote_model": "pyannote/speaker-diarization-3.1",
  "diarization": {
    "clustering_threshold": 0.6,
    "min_cluster_size": 8,
    "min_duration_off": 0.0,
    "min_duration_on": 0.0
  }
}
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|-----------|----------|-------------|
| `DION_ACCESS_TOKEN` | –¢–æ–∫–µ–Ω –¥–ª—è DION API | –ù–µ—Ç |
| `HF_TOKEN` | Hugging Face —Ç–æ–∫–µ–Ω | –î–∞ (–¥–ª—è PyAnnote) |
| `AWS_ACCESS_KEY_ID` | S3 Access Key | –î–∞ |
| `AWS_SECRET_ACCESS_KEY` | S3 Secret Key | –î–∞ |
| `S3_ENDPOINT` | S3 endpoint URL | –î–∞ |
| `PARALLEL_WORKERS` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2) |
| `TRANSCRIPTION_MODE` | –†–µ–∂–∏–º —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏: `fast` (—Å–∫–æ—Ä–æ—Å—Ç—å) –∏–ª–∏ `quality` (–∫–∞—á–µ—Å—Ç–≤–æ) | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `fast`) |
| `PYANNOTE_MODEL` | –ú–æ–¥–µ–ª—å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ PyAnnote | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `pyannote/speaker-diarization-3.1`) |
| `DIARIZATION_CLUSTERING_THRESHOLD` | –ü–æ—Ä–æ–≥ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–ø–∏–∫–µ—Ä–æ–≤ (–º–µ–Ω—å—à–µ = –±–æ–ª—å—à–µ —Å–ø–∏–∫–µ—Ä–æ–≤) | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.6) |
| `DIARIZATION_MIN_CLUSTER_SIZE` | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞ (–º–µ–Ω—å—à–µ = –±–æ–ª—å—à–µ —Å–ø–∏–∫–µ—Ä–æ–≤) | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8) |
| `DIARIZATION_MIN_DURATION_OFF` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—É–∑—ã –º–µ–∂–¥—É —Å–ø–∏–∫–µ—Ä–∞–º–∏ (—Å–µ–∫) | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.0) |
| `DIARIZATION_MIN_DURATION_ON` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–≥–º–µ–Ω—Ç–∞ —Ä–µ—á–∏ (—Å–µ–∫) | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.0) |

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–í `backend/app.py` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

- `CHECK_INTERVAL`: –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)
- `WHISPER_MODEL`: –ú–æ–¥–µ–ª—å Whisper (`large-v2`, `large-v3`, `medium`)
- `PYANNOTE_MODEL`: –ú–æ–¥–µ–ª—å PyAnnote (—Å–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (beam_size, temperature –∏ —Ç.–¥.)

### –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏

–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ PyAnnote (–æ—Ç —Ö—É–¥—à–µ–π –∫ –ª—É—á—à–µ–π):

1. **`pyannote/speaker-diarization-3.1`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
   - –°—Ç–∞–±–∏–ª—å–Ω–∞—è –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
   - –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

2. **`pyannote/speaker-diarization-community-1`** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   - **–ù–æ–≤–µ–π—à–∞—è –æ—Ç–∫—Ä—ã—Ç–∞—è –º–æ–¥–µ–ª—å** (2024)
   - **–õ—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ** —á–µ–º 3.1 –Ω–∞ 5-10%
   - –°–Ω–∏–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ (DER):
     - AMI (IHM): 17.0% vs 18.8% (3.1)
     - DIHARD 3: 20.2% vs 21.4% (3.1)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: `export PYANNOTE_MODEL=pyannote/speaker-diarization-community-1`

3. **`pyannote/speaker-diarization-precision-2`** (–ø—Ä–µ–º–∏—É–º):
   - **–ù–∞ 28% –ª—É—á—à–µ** —á–µ–º Community-1
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≥–æ–≤–æ—Ä—è—â–∏—Ö)
   - –¢—Ä–µ–±—É–µ—Ç API –∫–ª—é—á –æ—Ç pyannoteAI
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É API –∫–ª—é—á–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `community-1` –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç.

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—É—á—à—É—é –æ—Ç–∫—Ä—ã—Ç—É—é –º–æ–¥–µ–ª—å
export PYANNOTE_MODEL=pyannote/speaker-diarization-community-1
```

### –ü–æ–≤—ã—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏:

**–†–µ–∂–∏–º —Å–∫–æ—Ä–æ—Å—Ç–∏ (`fast`)** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `beam_size=3`, `best_of=2`
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

**–†–µ–∂–∏–º –∫–∞—á–µ—Å—Ç–≤–∞ (`quality`)**:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- `beam_size=5`, `best_of=5`
- Temperature fallback –¥–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∏–∑–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤
- –ù–∞ 2-3x –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ

**–í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∫–∞—á–µ—Å—Ç–≤–∞:**

```bash
# –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export TRANSCRIPTION_MODE=quality
```

–ò–ª–∏ –≤ Docker:
```yaml
environment:
  - TRANSCRIPTION_MODE=quality
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞:**

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–æ–π –º–æ–¥–µ–ª–∏ Whisper:**
   - –ò–∑–º–µ–Ω–∏—Ç–µ `WHISPER_MODEL` –≤ `app.py` –Ω–∞ `"large-v3"` (–ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `"medium"` –∫–∞–∫ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å

2. **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∞—É–¥–∏–æ:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—É–¥–∏–æ —Å —á–∞—Å—Ç–æ—Ç–æ–π –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ 16kHz –∏–ª–∏ –≤—ã—à–µ
   - –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ñ–æ–Ω–æ–≤—ã–π —à—É–º
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–Ω–æ-–∫–∞–Ω–∞–ª –¥–ª—è –ª—É—á—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–æ–¥–µ:**
   - –£–≤–µ–ª–∏—á—å—Ç–µ `beam_size` –¥–æ 7-10 –¥–ª—è –µ—â–µ –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
   - –£–≤–µ–ª–∏—á—å—Ç–µ `best_of` –¥–æ 7-10
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `no_speech_threshold` (0.3-0.6) –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ—á–∏
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `compression_ratio_threshold` (1.5-2.4) –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π

### –£–ª—É—á—à–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–ø–∏–∫–µ—Ä–æ–≤ (–¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è)

–ï—Å–ª–∏ —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–¥ –æ–¥–Ω–∏–º —Å–ø–∏–∫–µ—Ä–æ–º, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏:

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

1. **`DIARIZATION_CLUSTERING_THRESHOLD`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.6):
   - **–ú–µ–Ω—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ = –±–æ–ª—å—à–µ —Å–ø–∏–∫–µ—Ä–æ–≤** (–ª—É—á—à–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ)
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 0.5-0.65
   - –ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–æ–≤: —É–≤–µ–ª–∏—á—å—Ç–µ –¥–æ 0.7-0.75
   - –ï—Å–ª–∏ —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è: —É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 0.5-0.55

2. **`DIARIZATION_MIN_CLUSTER_SIZE`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8):
   - **–ú–µ–Ω—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ = –±–æ–ª—å—à–µ —Å–ø–∏–∫–µ—Ä–æ–≤** (–ª—É—á—à–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ)
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 6-10
   - –ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–æ–≤: —É–≤–µ–ª–∏—á—å—Ç–µ –¥–æ 12-15
   - –ï—Å–ª–∏ —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è: —É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 5-6

**–ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:**

```bash
# –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∏–∫–µ—Ä–æ–≤ (–±–æ–ª—å—à–µ —Å–ø–∏–∫–µ—Ä–æ–≤)
export DIARIZATION_CLUSTERING_THRESHOLD=0.55
export DIARIZATION_MIN_CLUSTER_SIZE=6

# –ò–ª–∏ –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
export DIARIZATION_CLUSTERING_THRESHOLD=0.5
export DIARIZATION_MIN_CLUSTER_SIZE=5
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `DIARIZATION_MIN_DURATION_OFF`: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Å–ø–∏–∫–µ—Ä–∞–º–∏ (—Å–µ–∫)
  - –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ 0.5-1.0 –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö –ø–∞—É–∑–∞—Ö
- `DIARIZATION_MIN_DURATION_ON`: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–≥–º–µ–Ω—Ç–∞ —Ä–µ—á–∏ (—Å–µ–∫)
  - –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ 0.5-1.0 –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

- –ù–∞—á–Ω–∏—Ç–µ —Å —É–º–µ–Ω—å—à–µ–Ω–∏—è `DIARIZATION_CLUSTERING_THRESHOLD` –¥–æ 0.55-0.6
- –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —É–º–µ–Ω—å—à–∏—Ç–µ `DIARIZATION_MIN_CLUSTER_SIZE` –¥–æ 6-7
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∞—É–¥–∏–æ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤—Å–µ–≥–æ —Ñ–∞–π–ª–∞
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–º—É —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é (–æ–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫ = –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–∏–∫–µ—Ä–æ–≤). –ù–∞—Ö–æ–¥–∏—Ç–µ –±–∞–ª–∞–Ω—Å –¥–ª—è –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2)
export PARALLEL_WORKERS=4
```

–ò–ª–∏ –≤ Docker:
```yaml
environment:
  - PARALLEL_WORKERS=4
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- **CPU**: 2-4 –ø–æ—Ç–æ–∫–∞ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —è–¥–µ—Ä)
- **GPU**: 2-8 –ø–æ—Ç–æ–∫–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞ –ø–∞–º—è—Ç–∏ GPU)
- **–°–º–µ—à–∞–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: –ù–∞—á–Ω–∏—Ç–µ —Å 2-3 –ø–æ—Ç–æ–∫–æ–≤ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ—Ç–æ–∫–æ–≤ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–æ–≤.

## üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: GPU (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ ‚â•4GB) –∏–ª–∏ CPU
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤**: –ù–µ—Å–∫–æ–ª—å–∫–æ –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `PARALLEL_WORKERS`)
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞**: –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è PyTorch**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ç–æ–∫–æ–≤ –∏ CUDA –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **FP16 —Ä–µ–∂–∏–º**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–æ–≤–∏–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –Ω–∞ GPU (2x —É—Å–∫–æ—Ä–µ–Ω–∏–µ)
- **–ë–∞—Ç—á–∏–Ω–≥**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–µ–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–†–µ–∂–∏–º—ã –∫–∞—á–µ—Å—Ç–≤–∞**: –í—ã–±–æ—Ä –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (`TRANSCRIPTION_MODE`)

### TensorFloat-32 (TF32) –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç PyAnnote –æ TensorFloat-32:

```
ReproducibilityWarning: TensorFloat-32 (TF32) has been disabled as it might lead to 
reproducibility issues and lower accuracy.
```

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- PyAnnote –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–∞–µ—Ç TF32 –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –í –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`app.py`, —Å—Ç—Ä–æ–∫–∏ 51-52) TF32 –≤–∫–ª—é—á–µ–Ω –æ–±—Ä–∞—Ç–Ω–æ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–∞ GPU

**TF32 —Ä–µ–∂–∏–º:**
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –£—Å–∫–æ—Ä—è–µ—Ç –º–∞—Ç—Ä–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ GPU (NVIDIA Ampere –∏ –Ω–æ–≤–µ–µ) –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 2 —Ä–∞–∑–∞
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –ú–æ–∂–µ—Ç –Ω–µ–º–Ω–æ–≥–æ —Å–Ω–∏–∂–∞—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ TF32:**

–í —Ñ–∞–π–ª–µ `backend/app.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
# –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
torch.backends.cuda.matmul.allow_tf32 = True
torch.backends.cudnn.allow_tf32 = True

# –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏:
torch.backends.cuda.matmul.allow_tf32 = False
torch.backends.cudnn.allow_tf32 = False
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- **–û—Å—Ç–∞–≤–∏—Ç—å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–∞–∑–ª–∏—á–∏—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ –¥–æ–ø—É—Å—Ç–∏–º—ã
- **–û—Ç–∫–ª—é—á–∏—Ç—å**: –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ø–æ–ª–Ω–∞—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å - —ç—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–µ –æ—à–∏–±–∫–∞.

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Python logging —Å —É—Ä–æ–≤–Ω–µ–º INFO. –õ–æ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç:

- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (GPU/CPU)
- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
- –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–æ–¥–µ–ª—è–º–∏

**–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ PyAnnote:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Hugging Face —Ç–æ–∫–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π
- –ú–æ–¥–µ–ª–∏ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ `backend/models/`

**–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Whisper:**
- –ú–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ (–º–æ–¥–µ–ª–∏ –∑–∞–Ω–∏–º–∞—é—Ç ~3-5 GB)

### –ü—Ä–æ–±–ª–µ–º—ã —Å GPU

**GPU –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É CUDA: `nvidia-smi`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PyTorch —Å CUDA –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—É—é –ø–∞–º—è—Ç—å GPU (—Ç—Ä–µ–±—É–µ—Ç—Å—è ‚â•4GB)

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ TF32:**
- –≠—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–µ –æ—à–∏–±–∫–∞
- –°–º. —Ä–∞–∑–¥–µ–ª "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏" –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ TF32

### –ü—Ä–æ–±–ª–µ–º—ã —Å S3/MinIO

**–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ MinIO:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MinIO –∑–∞–ø—É—â–µ–Ω: `docker ps`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ bucket `diarization-files` —Å–æ–∑–¥–∞–Ω

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[–£–∫–∞–∂–∏—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏—é –ø—Ä–æ–µ–∫—Ç–∞]

## üë• –ê–≤—Ç–æ—Ä—ã

[–£–∫–∞–∂–∏—Ç–µ –∞–≤—Ç–æ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞]

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

[–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–Ω–µ—Å–µ–Ω–∏—é –≤–∫–ª–∞–¥–∞]

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

[–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏]
